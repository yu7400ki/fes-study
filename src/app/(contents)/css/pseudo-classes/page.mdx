---
title: 疑似クラス
---

import { WebExample } from "../../_components";

# 疑似クラス

疑似クラスは、要素の状態に応じてスタイルを適用するための記法です。
以下の構文で疑似クラスを選択します。

```css
selector:pseudo-class {
  property: value;
}
```

疑似クラスには非常に多くの種類がありますが、ここでは個人的によく使うものを紹介します。
必要に応じて、[MDN Web Docs](https://developer.mozilla.org/ja/docs/Web/CSS/Pseudo-classes)などを参照してください。

## :hover

`:hover`疑似クラスは、マウスが要素に乗ったときに適用されます。

<WebExample>
  <style>
    {`
      p:hover {
        text-decoration: underline;
      }
    `}
  </style>
  <p>Hover me</p>
</WebExample>

```css
p:hover {
  background-color: lightblue;
}
```

```html
<p>Hover me</p>
```

## :active

`:active`疑似クラスは、要素がアクティブ（クリックされるなど）時に適用されます。

<WebExample>
  <style>
    {`
      button:active {
        background-color: lightblue;
      }
    `}
  </style>
  <button>Click me</button>
</WebExample>

```css
button:active {
  background-color: lightblue;
}
```

```html
<button>Click me</button>
```

## :focus-visible

`:focus-visible`疑似クラスは、要素がフォーカスされ、ユーザーエージェントが要素にフォーカスを明示するべきであると推測的に判断した場合に適用されます。

<WebExample>
  <style>
    {`
      input:focus-visible {
        outline: 2px solid red;
      }
    `}
  </style>
  <input type="text" />
</WebExample>

```css
input:focus-visible {
  outline: 2px solid red;
}
```

```html
<input type="text" />
```

## :focus-within

`:focus-within`疑似クラスは、要素自体またはその子孫要素がフォーカスされたときに適用されます。

<WebExample>
  <style>
    {`
      div:focus-within {
        background-color: lightblue;
      }
    `}
  </style>
  <div>
    <input type="text" />
  </div>
</WebExample>

```css
div:focus-within {
  background-color: lightblue;
}
```

```html
<div>
  <input type="text" />
</div>
```

## :checked

`:checked`疑似クラスは、チェックされたチェックボックスやラジオボタンに適用されます。

<WebExample>
  <style>
    {`
      div {
        height: 0;
        overflow: hidden;
      }
      input:checked + div {
        border: 1px solid black;
        height: 100px;
      }
    `}
  </style>
  <label htmlFor="checkbox">Check me</label>
  <input type="checkbox" id="checkbox" />
  <div>Checked!</div>
</WebExample>

```css
div {
  height: 0;
  overflow: hidden;
}
input:checked + div {
  border: 1px solid black;
  height: 100px;
}
```

```html
<label for="checkbox">Check me</label>
<input type="checkbox" id="checkbox" />
<div>Checked!</div>
```

## :invalid

`:invalid`疑似クラスは、無効な内容を持つフォーム要素に適用されます。

<WebExample>
  <style>
    {`
      input:invalid {
        border: 1px solid red;
      }
    `}
  </style>
  <input type="email" defaultValue="@example.com" />
</WebExample>

```css
input:invalid {
  border: 1px solid red;
}
```

```html
<input type="email" value="@example.com" />
```

## :first-child

`:first-child`疑似クラスは、兄弟要素のグループの中で最初の要素に適用されます。

<WebExample>
  <style>
    {`
      p:first-child {
        color: red;
      }
    `}
  </style>
  <div>
    <p>First</p>
    <p>Second</p>
  </div>
</WebExample>

```css
p:first-child {
  color: red;
}
```

```html
<div>
  <p>First</p>
  <p>Second</p>
</div>
```

## :nth-child()

`:nth-child()`疑似クラスは、兄弟要素のグループの中で指定した位置の要素に適用されます。
位置は`An + B`の形式で指定します。

また、以下のキーワードも使用できます。

- `odd`: 奇数番目の要素(`2n + 1`に相当)
- `even`: 偶数番目の要素(`2n`に相当)

<WebExample>
  <style>
    {`
      p:nth-child(2n) {
        color: red;
      }
    `}
  </style>
  <div>
    <p>First</p>
    <p>Second</p>
    <p>Third</p>
    <p>Fourth</p>
  </div>
</WebExample>

```css
p:nth-child(2n) {
  color: red;
}
```

```html
<div>
  <p>First</p>
  <p>Second</p>
  <p>Third</p>
  <p>Fourth</p>
</div>
```

## :not()

`:not()`疑似クラスは、指定したセレクターに一致しない要素に適用されます。

<WebExample>
  <style>
    {`
      p:not(.red) {
        color: blue;
      }
    `}
  </style>
  <p className="red">Red</p>
  <p>Blue</p>
</WebExample>

```css
p:not(.red) {
  color: blue;
}
```

```html
<p class="red">Red</p>
<p>Blue</p>
```

## :has()

`:has()`疑似クラスは、指定したセレクターに一致する子要素を持つ要素に適用されます。

<WebExample>
  <style>
    {`
      div:has(p) {
        background-color: lightblue;
      }
    `}
  </style>
  <div>
    <p>Hello</p>
  </div>
  <div>
    <span>World</span>
  </div>
</WebExample>

```css
div:has(p) {
  background-color: lightblue;
}
```

```html
<div>
  <p>Hello</p>
</div>
<div>
  <span>World</span>
</div>
```

また、結合子を使用することで、子要素以外も指定できます。

<WebExample>
  <style>
    {`
      p:has(+ p) {
        background-color: lightblue;
      }
    `}
  </style>
  <p>Hello</p>
  <p>World</p>
</WebExample>

```css
p:has(+ p) {
  background-color: lightblue;
}
```

```html
<p>Hello</p>
<p>World</p>
```

## 複雑なスタイル

結合子や疑似クラスを組み合わせることで、複雑なスタイルもCSSのみで記述することができます。

<WebExample>
  <style>
    {`
      * {
        margin: 0;
        padding: 0;
      }
      div {
        display: flex;
      }
      label {
        height: 40px;
        width: 40px;
        border-radius: 50%;
        display: grid;
        place-items: center;
      }
      label:hover,
      label:has(input:checked) {
        background-color: lightblue;
      }
      label:has(input:checked) + label:has(input:checked) {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
      }
      label:has(input:checked):has(+ label > input:checked) {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      }
    `}
  </style>
  <div>
    <label>
      <input type="checkbox" />
    </label>
    <label>
      <input type="checkbox" />
    </label>
    <label>
      <input type="checkbox" />
    </label>
    <label>
      <input type="checkbox" />
    </label>
    <label>
      <input type="checkbox" />
    </label>
  </div>
</WebExample>

```css
* {
  margin: 0;
  padding: 0;
}
div {
  display: flex;
}
label {
  height: 40px;
  width: 40px;
  border-radius: 50%;
  display: grid;
  place-items: center;
}
label:hover,
label:has(input:checked) {
  background-color: lightblue;
}
label:has(input:checked) + label:has(input:checked) {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
label:has(input:checked):has(+ label > input:checked) {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
```

```html
<div>
  <label>
    <input type="checkbox" />
  </label>
  <label>
    <input type="checkbox" />
  </label>
  <label>
    <input type="checkbox" />
  </label>
  <label>
    <input type="checkbox" />
  </label>
  <label>
    <input type="checkbox" />
  </label>
</div>
```
